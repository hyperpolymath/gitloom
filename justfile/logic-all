#!/usr/bin/env just --justfile
# ðŸ§  Ritual: Logic All - Final Clean Version
KANREN_FACTS := 'logic/kanren_facts.pl'
LOGIC_OUTPUT := 'logic/output.ndjson'
@default: run-prolog

# This recipe is now only a placeholder for Prolog. Elixir handles MiniKanren setup.
# Prolog must run first to ensure the logic works.
run-prolog:
    @echo '--- ðŸ§  Running Prolog (Evaluating Rules) ---'
    @mkdir -p logic
    @cd logic && swipl -g "consult('loom_index.pl'), run_badge_trace('gitloom'), halt." | sort -u > ../{{LOGIC_OUTPUT}}
    @echo 'INFO: Prolog trace written to {{LOGIC_OUTPUT}}'
